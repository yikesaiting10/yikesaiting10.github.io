---
layout: post
title:  vector相关
subtitle: 插入、删除、内存分配、二维数组等
author: zql
date: 2020-05-21
header-img: img/C++1_post.jpg
catalog:  true
tags:
    - C++
---
连续存储的容器，动态数组，在堆上分配空间  
底层实现：数组  
两倍容量增长：  
vector 增加（插入）新元素时，如果未超过当时的容量，则还有剩余空间，那么直接添加到最后（插入指定位置），然后调整迭代器。  
如果没有剩余空间了，则会重新配置原有元素个数的两倍空间，然后将原空间元素通过复制的方式初始化新空间，再向新空间增加元素，最后析构并释放原空间，之前的迭代器会失效。  
性能：  
访问：O(1)  
插入：在最后插入（空间够）：很快  
在最后插入（空间不够）：需要内存申请和释放，以及对之前数据进行拷贝。  
在中间插入（空间够）：内存拷贝  
在中间插入（空间不够）：需要内存申请和释放，以及对之前数据进行拷贝。  
删除：在最后删除：很快  
在中间删除：内存拷贝  
适用场景：经常随机访问，且不经常对非尾节点进行插入删除。  
对于序列容器vector,deque来说，使用erase(itertor)后，后边的每个元素的迭代器都会失效，但是后边每个元素都会往前移动一个位置，但是erase会返回下一个有效的迭代器。  
vector::erase()用于清空容器中的内容以及释放内存,并返回指向删除元素的下一个元素的迭代器。  
vector::clear()函数的作用是清空容器中的内容但不释放内存，但如果是指针对象的话，并不能清空其内容。  
